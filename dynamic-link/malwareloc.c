#include <dlfcn.h>
#include <stdio.h>
#include <string.h>

#define INIT 0x69

void* malloc(size_t size) {
    void* (*lib_malloc)(size_t) = dlsym(RTLD_NEXT, "malloc");
    fprintf(stderr, "malloc %d bytes\n", size);
    void* ret = lib_malloc(size);
    fprintf(stderr, "%p\n", ret);
    memset(ret, INIT, size);
    return ret;
}
